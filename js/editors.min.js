jQuery(document).ready(function(a){data=_code_revisions;a("#template #submit").after('<span class="revisions_link">'+data.text+"</span>");if(0<data.post_id){a("#template").append(data.revisions_list)}function b(e){e--;var h=a("#newcontent");var d=h.val().split("\n"),j=0;for(var g=0;g<d.length;g++){if(g==e){break}j+=(d[g].length+1)}var c=d[e].length+j;if(typeof h[0].selectionStart!="undefined"){h.focus();h[0].selectionStart=j;h[0].selectionEnd=c;return true}if(document.selection&&document.selection.createRange){h.focus();h.select();var f=document.selection.createRange();f.collapse(true);f.moveEnd("character",c);f.moveStart("character",j);f.select();return true}return false}if(data.newcontent.length>0){a("#newcontent").val(data.newcontent)}if(data.line.length>0){b(data.line);a("#highlight_line").click(function(){b(data.line)})}});